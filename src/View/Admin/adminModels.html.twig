{% extends 'base.html.twig' %}

{% block pageTitle %}Administration des Modèles{% endblock %}

{% block content %}
    <h1>Administration des Modèles <a class="btn btn-success btn-lg pull-right" href="index.php?route=adminmodeladd">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"> Ajouter un modèle</span>
        </a></h1>
    <div class="container">

        <ul class="list-group">
            {% for model in models %}
                <li class="list-group-item">
                    <p>Modèle : {{ model.name }} ( existe en {{ declinationsNumber[model.id] }}
                        couleur{{ (declinationsNumber[model.id] > 1) ? 's' }} )</p>

                    <form action="index.php?route=adminmodelupdate" method='post'>
                        <div class="form-group">
                            <input type="hidden" class="form-control" name="model_id" value="{{ model.id }}">
                        </div>
                        <button type="submit" class="btn btn-primary"><span class="glyphicon glyphicon-edit"
                                                                            aria-hidden="true"> Modifier ce modèle</span>
                        </button>
                    </form>

                    <form action="index.php?route=adminmodelupdate" method='post'>
                        <div class="form-group">
                            <input type="hidden" class="form-control" name="model_id" value="{{ model.id }}">
                        </div>
                        <button type="submit" class="btn btn-info"><span class="glyphicon glyphicon-list"
                                                                         aria-hidden="true"> Gérer les réalisations de ce modèle</span>
                        </button>
                    </form>

                    <form action="index.php?route=adminmodeldelete" method='post'>
                        <div class="form-group">
                            <input type="hidden" class="form-control" name="model_id" value="{{ model.id }}">
                        </div>
                        <button type="submit"
                                class="btn btn-danger" {{ (declinationsNumber[model.id] > 0) ? 'disabled="disabled"' }}><span
                                    class="glyphicon glyphicon-trash"
                                    aria-hidden="true"> Supprimer ce modèle</span>
                        </button>
                        {% if declinationsNumber[model.id] > 0 %}
                            <strong> Il y a {{ declinationsNumber[model.id] }} variantes associés à ce modèle, vous ne
                                pouvez pas
                                le supprimer.</strong>
                        {% endif %}
                    </form>
                </li>
            {% endfor %}
        </ul>
    </div>

{% endblock %}
